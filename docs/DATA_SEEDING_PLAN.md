# NeuralTwin ë°ì´í„° ì‹œë”© ê³„íšì„œ

## ğŸ“‹ ê°œìš”

ê¸°ì¡´ ì‹œë”©ëœ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ê³  ìµœì¢… ìƒ˜í”Œ ë°ì´í„°ì…‹ìœ¼ë¡œ ì¬ì‹œë”©í•˜ê¸° ìœ„í•œ ë‹¨ê³„ë³„ ì ˆì°¨ì…ë‹ˆë‹¤.

---

## 1ï¸âƒ£ í…Œì´ë¸” ì˜ì¡´ì„± ë¶„ì„

### ê³„ì¸µ êµ¬ì¡° (FK ì˜ì¡´ì„± ê¸°ì¤€)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 0: ë…ë¦½ í…Œì´ë¸” (ì™¸ë¶€ ì˜ì¡´ ì—†ìŒ)                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ organizations                                                              â”‚
â”‚ â€¢ auth.users                                                                â”‚
â”‚ â€¢ ontology_entity_types                                                     â”‚
â”‚ â€¢ ontology_relation_types                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 1: ë§ˆìŠ¤í„° ë°ì´í„° (Level 0 ì˜ì¡´)                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ stores â†’ (organizations, auth.users)                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 2: ê¸°ë³¸ ì—”í‹°í‹° (stores ì˜ì¡´)                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ zones_dim â†’ (stores)                                                      â”‚
â”‚ â€¢ products â†’ (stores)                                                       â”‚
â”‚ â€¢ staff â†’ (stores)                                                          â”‚
â”‚ â€¢ customers â†’ (stores)                                                      â”‚
â”‚ â€¢ store_goals â†’ (stores)                                                    â”‚
â”‚ â€¢ store_scenes â†’ (stores)                                                   â”‚
â”‚ â€¢ data_sources â†’ (stores)                                                   â”‚
â”‚ â€¢ retail_concepts â†’ (stores)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 3: ê°€êµ¬/ìŠ¬ë¡¯ ì‹œìŠ¤í…œ (zones_dim, stores ì˜ì¡´)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ furniture â†’ (stores, zones_dim)                                           â”‚
â”‚ â€¢ furniture_slots â†’ (stores, furniture)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 4: íŠ¸ëœì­ì…˜ ë°ì´í„° (Level 2 ì—”í‹°í‹° ì˜ì¡´)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ store_visits â†’ (stores, customers)                                        â”‚
â”‚ â€¢ purchases â†’ (stores, customers)                                           â”‚
â”‚ â€¢ transactions â†’ (stores)                                                   â”‚
â”‚ â€¢ inventory_levels â†’ (products)                                             â”‚
â”‚ â€¢ graph_entities â†’ (stores)                                                 â”‚
â”‚ â€¢ applied_strategies â†’ (stores)                                             â”‚
â”‚ â€¢ ai_recommendations â†’ (stores)                                             â”‚
â”‚ â€¢ ai_inference_results â†’ (stores)                                           â”‚
â”‚ â€¢ product_placements â†’ (stores, products)                                   â”‚
â”‚ â€¢ layout_optimization_results â†’ (stores)                                    â”‚
â”‚ â€¢ data_source_tables â†’ (data_sources)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 5: íŠ¸ëœì­ì…˜ ìƒì„¸ ë° ì´ë²¤íŠ¸                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ line_items â†’ (stores, products, purchases/transactions)                   â”‚
â”‚ â€¢ funnel_events â†’ (stores, customers)                                       â”‚
â”‚ â€¢ zone_events â†’ (stores, zones_dim)                                         â”‚
â”‚ â€¢ graph_relations â†’ (stores, graph_entities)                                â”‚
â”‚ â€¢ strategy_daily_metrics â†’ (applied_strategies)                             â”‚
â”‚ â€¢ strategy_feedback â†’ (stores, applied_strategies)                          â”‚
â”‚ â€¢ ontology_entity_mappings â†’ (data_sources, ontology_entity_types)          â”‚
â”‚ â€¢ ontology_relation_mappings â†’ (data_sources, ontology_relation_types)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LEVEL 6: ì§‘ê³„ í…Œì´ë¸”                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ daily_kpis_agg â†’ (stores)                                                 â”‚
â”‚ â€¢ daily_sales â†’ (stores)                                                    â”‚
â”‚ â€¢ zone_daily_metrics â†’ (stores, zones_dim)                                  â”‚
â”‚ â€¢ hourly_metrics â†’ (stores)                                                 â”‚
â”‚ â€¢ product_performance_agg â†’ (stores, products)                              â”‚
â”‚ â€¢ customer_segments_agg â†’ (stores)                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ ë°ì´í„° ì‚­ì œ ì ˆì°¨

### ì‚­ì œ ìˆœì„œ (Level 6 â†’ Level 0, ì—­ìˆœ)

```sql
-- ============================================================================
-- STEP 0: FK ì œì•½ì¡°ê±´ ì„ì‹œ ë¹„í™œì„±í™” (ì„ íƒì )
-- ============================================================================
SET session_replication_role = 'replica';

-- ============================================================================
-- STEP 1: ì§‘ê³„ í…Œì´ë¸” ì‚­ì œ (Level 6)
-- ============================================================================
DELETE FROM daily_kpis_agg WHERE store_id = :store_id;
DELETE FROM daily_sales WHERE store_id = :store_id;
DELETE FROM zone_daily_metrics WHERE store_id = :store_id;
DELETE FROM hourly_metrics WHERE store_id = :store_id;
DELETE FROM product_performance_agg WHERE store_id = :store_id;
DELETE FROM customer_segments_agg WHERE store_id = :store_id;

-- ============================================================================
-- STEP 2: íŠ¸ëœì­ì…˜ ìƒì„¸/ì´ë²¤íŠ¸ ì‚­ì œ (Level 5)
-- ============================================================================
DELETE FROM line_items WHERE store_id = :store_id;
DELETE FROM funnel_events WHERE store_id = :store_id;
DELETE FROM zone_events WHERE store_id = :store_id;
DELETE FROM graph_relations WHERE store_id = :store_id;
DELETE FROM strategy_daily_metrics WHERE strategy_id IN
  (SELECT id FROM applied_strategies WHERE store_id = :store_id);
DELETE FROM strategy_feedback WHERE store_id = :store_id;
DELETE FROM ontology_entity_mappings WHERE data_source_id IN
  (SELECT id FROM data_sources WHERE store_id = :store_id);
DELETE FROM ontology_relation_mappings WHERE data_source_id IN
  (SELECT id FROM data_sources WHERE store_id = :store_id);

-- ============================================================================
-- STEP 3: íŠ¸ëœì­ì…˜ ë°ì´í„° ì‚­ì œ (Level 4)
-- ============================================================================
DELETE FROM store_visits WHERE store_id = :store_id;
DELETE FROM purchases WHERE store_id = :store_id;
DELETE FROM transactions WHERE store_id = :store_id;
DELETE FROM inventory_levels WHERE product_id IN
  (SELECT id FROM products WHERE store_id = :store_id);
DELETE FROM graph_entities WHERE store_id = :store_id;
DELETE FROM applied_strategies WHERE store_id = :store_id;
DELETE FROM ai_recommendations WHERE store_id = :store_id;
DELETE FROM ai_inference_results WHERE store_id = :store_id;
DELETE FROM product_placements WHERE store_id = :store_id;
DELETE FROM layout_optimization_results WHERE store_id = :store_id;
DELETE FROM data_source_tables WHERE data_source_id IN
  (SELECT id FROM data_sources WHERE store_id = :store_id);

-- ============================================================================
-- STEP 4: ê°€êµ¬/ìŠ¬ë¡¯ ì‚­ì œ (Level 3)
-- ============================================================================
DELETE FROM furniture_slots WHERE store_id = :store_id;
DELETE FROM furniture WHERE store_id = :store_id;

-- ============================================================================
-- STEP 5: ê¸°ë³¸ ì—”í‹°í‹° ì‚­ì œ (Level 2)
-- ============================================================================
DELETE FROM zones_dim WHERE store_id = :store_id;
DELETE FROM products WHERE store_id = :store_id;
DELETE FROM staff WHERE store_id = :store_id;
DELETE FROM customers WHERE store_id = :store_id;
DELETE FROM store_goals WHERE store_id = :store_id;
DELETE FROM store_scenes WHERE store_id = :store_id;
DELETE FROM data_sources WHERE store_id = :store_id;
DELETE FROM retail_concepts WHERE store_id = :store_id;

-- ============================================================================
-- STEP 6: ë§ˆìŠ¤í„° ë°ì´í„° ì‚­ì œ (Level 1)
-- ============================================================================
DELETE FROM stores WHERE id = :store_id;

-- ============================================================================
-- STEP 7: ì˜¨í†¨ë¡œì§€ íƒ€ì… ì‚­ì œ (Level 0) - ì„ íƒì 
-- ============================================================================
-- í•„ìš”í•œ ê²½ìš°ë§Œ ì‚­ì œ (ë‹¤ë¥¸ storeì—ì„œ ê³µìœ ë  ìˆ˜ ìˆìŒ)
-- DELETE FROM ontology_entity_types WHERE id::TEXT LIKE 'b0000%';
-- DELETE FROM ontology_relation_types WHERE id::TEXT LIKE 'c0000%';

-- ============================================================================
-- STEP 8: FK ì œì•½ì¡°ê±´ ì¬í™œì„±í™”
-- ============================================================================
SET session_replication_role = 'origin';
```

---

## 3ï¸âƒ£ ë°ì´í„° ì‹œë”© ì ˆì°¨

### ì‹œë”© ìˆœì„œ (Level 0 â†’ Level 6, ì •ìˆœ)

#### Phase 1: ìŠ¤í‚¤ë§ˆ ë§ˆì´ê·¸ë ˆì´ì…˜ (í…Œì´ë¸” ìƒì„±)
```
ì‹¤í–‰ ìˆœì„œ:
1. 20251216_furniture_table.sql        -- furniture, furniture_slots í…Œì´ë¸” ìƒì„±
2. 20251216_product_placement_and_avatars.sql  -- product_placements, layout_optimization_results ë“±
3. 20251216_display_type_and_slots.sql -- display_type, compatible_display_types ì»¬ëŸ¼ ì¶”ê°€
```

#### Phase 2: ê¸°ë³¸ ë°ì´í„° ì‹œë”©
```
ì‹¤í–‰ ìˆœì„œ:
4. NEURALTWIN_UNIFIED_SEED_v8.sql      -- ì „ì²´ ê¸°ë³¸ ë°ì´í„° (stores, zones, products, staff, customers, visits, transactions, aggregates, etc.)
5. NEURALTWIN_v8.3_unified_products_furniture.sql  -- ê°€êµ¬/ìŠ¬ë¡¯ ë°ì´í„° (products ì—…ë°ì´íŠ¸, furniture, furniture_slots)
```

#### Phase 3: ëª¨ë¸ URL ì—°ê²°
```
ì‹¤í–‰ ìˆœì„œ:
6. MVP_MODEL_URL_UPDATE.sql            -- 3D ëª¨ë¸ URL ì—°ê²°, ì´ˆê¸° ë°°ì¹˜ ì„¤ì •
```

---

## 4ï¸âƒ£ ìƒˆ ì‹œë”© ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ì‹œ í•„ìˆ˜ í•­ëª©

### ê¸°ë³¸ ID ì°¸ì¡° (í˜„ì¬ ì‚¬ìš© ì¤‘)

| ì—”í‹°í‹° | ID | ì„¤ëª… |
|--------|-----|------|
| store_id | `d9830554-2688-4032-af40-acccda787ac4` | ë©”ì¸ ë§¤ì¥ |
| user_id | `e4200130-08e8-47da-8c92-3d0b90fafd77` | ì†Œìœ ì |
| org_id | `0c6076e3-a993-4022-9b40-0f4e4370f8ef` | ì¡°ì§ |

### zones_dim ID ì°¸ì¡°

| zone_code | zone_id | zone_name | zone_type |
|-----------|---------|-----------|-----------|
| Z001 | `a0000001-...` | ì…êµ¬ | entrance |
| Z002 | `a0000002-...` | ë©”ì¸í™€ | main |
| Z003 | `a0000003-...` | ì˜ë¥˜ì¡´ | display |
| Z004 | `a0000004-...` | ì•¡ì„¸ì„œë¦¬ì¡´ | display |
| Z005 | `a0000005-...` | í”¼íŒ…ë£¸ | fitting |
| Z006 | `a0000006-...` | ê³„ì‚°ëŒ€ | checkout |
| Z007 | `a0000007-...` | íœ´ì‹ê³µê°„ | lounge |

### products ID íŒ¨í„´

| ë²”ìœ„ | ID íŒ¨í„´ | ì¹´í…Œê³ ë¦¬ |
|------|---------|----------|
| 1-5 | `f00001-...` ~ `f00005-...` | ì•„ìš°í„° |
| 6-10 | `f00006-...` ~ `f00010-...` | ìƒì˜ |
| 11-15 | `f00011-...` ~ `f00015-...` | í•˜ì˜ |
| 16-20 | `f00016-...` ~ `f00020-...` | ì•¡ì„¸ì„œë¦¬ |
| 21-23 | `f00021-...` ~ `f00023-...` | ì‹ ë°œ |
| 24-25 | `f00024-...` ~ `f00025-...` | í™”ì¥í’ˆ |

### furniture ID ì°¸ì¡°

| furniture_code | furniture_id | type |
|----------------|--------------|------|
| RACK-001~004 | `b0000001-...` ~ `b0000004-...` | clothing_rack_double |
| SHELF-001~002 | `b0000011-...` ~ `b0000012-...` | shelf_display |
| TABLE-001~002 | `b0000021-...` ~ `b0000022-...` | table_display |
| SHOE-001 | `b0000031-...` | shoe_rack |
| MANNEQUIN-001~004 | `b0000051-...` ~ `b0000054-...` | mannequin_* |

### customers ID íŒ¨í„´

| ë²”ìœ„ | ID íŒ¨í„´ | segment |
|------|---------|---------|
| 1-125 | `c0000001-...` ~ `c0000125-...` | VIP (5%) |
| 126-625 | `c0000126-...` ~ `c0000625-...` | Regular (20%) |
| 626-2500 | `c0000626-...` ~ `c2500000-...` | New (75%) |

---

## 5ï¸âƒ£ ìƒˆ ì‹œë”© ìŠ¤í¬ë¦½íŠ¸ í…œí”Œë¦¿

```sql
-- ============================================================================
-- NEURALTWIN ì‹œë”© ìŠ¤í¬ë¦½íŠ¸: [ìŠ¤í¬ë¦½íŠ¸ëª…]
-- ============================================================================
-- Version: X.X.X
-- Date: YYYY-MM-DD
-- Prerequisites: [ì„ í–‰ ìŠ¤í¬ë¦½íŠ¸ ëª©ë¡]
-- Description: [ì„¤ëª…]
-- ============================================================================

DO $$
DECLARE
  v_store_id UUID := 'd9830554-2688-4032-af40-acccda787ac4';
  v_user_id UUID := 'e4200130-08e8-47da-8c92-3d0b90fafd77';
  v_org_id UUID := '0c6076e3-a993-4022-9b40-0f4e4370f8ef';
BEGIN
  -- FK ì œì•½ ì„ì‹œ ë¹„í™œì„±í™” (í•„ìš”ì‹œ)
  SET session_replication_role = 'replica';

  RAISE NOTICE 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';
  RAISE NOTICE '[ìŠ¤í¬ë¦½íŠ¸ëª…] - ì‹œì‘';
  RAISE NOTICE 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';

  -- ========================================
  -- 1. ê¸°ì¡´ ë°ì´í„° ì‚­ì œ (í•´ë‹¹ í…Œì´ë¸”ë§Œ)
  -- ========================================
  DELETE FROM [í…Œì´ë¸”ëª…] WHERE store_id = v_store_id;

  -- ========================================
  -- 2. ìƒˆ ë°ì´í„° ì‚½ì…
  -- ========================================
  INSERT INTO [í…Œì´ë¸”ëª…] (id, store_id, user_id, org_id, ...)
  VALUES (...);

  -- FK ì œì•½ ì¬í™œì„±í™”
  SET session_replication_role = 'origin';

  RAISE NOTICE 'âœ“ [í…Œì´ë¸”ëª…]: Nê±´ ìƒì„±';
END $$;
```

---

## 6ï¸âƒ£ ê¶Œì¥ ìµœì¢… ë°ì´í„°ì…‹ êµ¬ì„±

### ë§ˆìŠ¤í„° ë°ì´í„°
| í…Œì´ë¸” | ê±´ìˆ˜ | ì„¤ëª… |
|--------|------|------|
| stores | 1 | Aë§¤ì¥ |
| zones_dim | 7 | ì…êµ¬, ë©”ì¸, ì˜ë¥˜, ì•¡ì„¸ì„œë¦¬, í”¼íŒ…, ê³„ì‚°ëŒ€, íœ´ì‹ |
| products | 25 | ì¹´í…Œê³ ë¦¬ë³„ ë‹¤ì–‘í•œ ìƒí’ˆ |
| staff | 8 | ì—­í• ë³„ ì§ì› |
| customers | 500-2,500 | ì„¸ê·¸ë¨¼íŠ¸ë³„ ê³ ê° (VIP/Regular/New) |
| furniture | 14 | í–‰ê±°, ì„ ë°˜, í…Œì´ë¸”, ì‹ ë°œë™, ë§ˆë„¤í‚¹ |
| furniture_slots | 105 | ê° ê°€êµ¬ë³„ ìŠ¬ë¡¯ |

### íŠ¸ëœì­ì…˜ ë°ì´í„° (90ì¼ ê¸°ì¤€)
| í…Œì´ë¸” | ê±´ìˆ˜ | ì„¤ëª… |
|--------|------|------|
| store_visits | 3,000-4,000 | ê³ ê° ë°©ë¬¸ ê¸°ë¡ |
| purchases | 400-600 | êµ¬ë§¤ ê¸°ë¡ |
| line_items | 800-1,200 | êµ¬ë§¤ ìƒì„¸ |
| zone_events | 4,000-6,000 | ì¡´ ì´ë²¤íŠ¸ |
| funnel_events | 5,000-7,000 | í¼ë„ ì´ë²¤íŠ¸ |

### ì§‘ê³„ ë°ì´í„° (90ì¼ ê¸°ì¤€)
| í…Œì´ë¸” | ê±´ìˆ˜ | ì„¤ëª… |
|--------|------|------|
| daily_kpis_agg | 90 | ì¼ë³„ KPI |
| daily_sales | 90 | ì¼ë³„ ë§¤ì¶œ |
| zone_daily_metrics | 630 | ì¼ë³„ ì¡´ ë©”íŠ¸ë¦­ (90ì¼ Ã— 7ì¡´) |
| hourly_metrics | 1,080 | ì‹œê°„ë³„ ë©”íŠ¸ë¦­ (90ì¼ Ã— 12ì‹œê°„) |
| product_performance_agg | 2,250 | ìƒí’ˆ ì„±ê³¼ (90ì¼ Ã— 25ìƒí’ˆ) |

---

## 7ï¸âƒ£ ì‹¤í–‰ ëª…ë ¹ì–´

### ì „ì²´ ì‚­ì œ í›„ ì¬ì‹œë”©
```bash
# 1. Supabase SQL Editorì—ì„œ ì‹¤í–‰í•˜ê±°ë‚˜:
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f scripts/DELETE_ALL_DATA.sql

# 2. ì‹œë”© ìŠ¤í¬ë¦½íŠ¸ ìˆœì°¨ ì‹¤í–‰:
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f supabase/migrations/20251216_furniture_table.sql
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f supabase/migrations/20251216_product_placement_and_avatars.sql
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f supabase/migrations/20251216_display_type_and_slots.sql
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f supabase/seeds/NEURALTWIN_UNIFIED_SEED_v8.sql
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f supabase/seeds/NEURALTWIN_v8.3_unified_products_furniture.sql
psql -h db.xxxxx.supabase.co -U postgres -d postgres -f supabase/seeds/MVP_MODEL_URL_UPDATE.sql
```

### Supabase CLI ì‚¬ìš©ì‹œ
```bash
# ë¡œì»¬ ê°œë°œ DB ë¦¬ì…‹ ë° ì‹œë”©
npx supabase db reset

# ë˜ëŠ” ê°œë³„ ë§ˆì´ê·¸ë ˆì´ì…˜
npx supabase migration up
```

---

## ğŸ“ ì£¼ì˜ì‚¬í•­

1. **ì‚­ì œ ì „ ë°±ì—…**: ì¤‘ìš” ë°ì´í„°ëŠ” ì‚­ì œ ì „ ë°˜ë“œì‹œ ë°±ì—…
2. **FK ì œì•½**: `session_replication_role = 'replica'` ì‚¬ìš© ì‹œ FK ê²€ì¦ì´ ë¹„í™œì„±í™”ë˜ë¯€ë¡œ ì£¼ì˜
3. **ìˆœì„œ ì¤€ìˆ˜**: ì‹œë”© ìˆœì„œë¥¼ ë°˜ë“œì‹œ ì¤€ìˆ˜ (ì˜ì¡´ì„± ìœ„ë°˜ ë°©ì§€)
4. **ID ì¼ê´€ì„±**: ê³ ì • UUID ì‚¬ìš©ìœ¼ë¡œ ë©±ë“±ì„± ë³´ì¥
5. **í…ŒìŠ¤íŠ¸**: í”„ë¡œë•ì…˜ ì ìš© ì „ ê°œë°œ/ìŠ¤í…Œì´ì§• í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸
